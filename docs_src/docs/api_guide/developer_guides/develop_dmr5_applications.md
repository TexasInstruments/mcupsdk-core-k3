# Developing applications on DM R5{#DEVELOP_AND_DEBUG_DMR5}

[TOC]

## Developing applications on Device Manager/Wake-up R5 core
### Introduction

 The wake-up R5 (or) device manager(DM) R5 core is responsible for running the DM firmware. The DM firmware is
 responsible for resource management and power management.

The DM firmware requires following components (as libraries) to be included in the application.
  - "rm_pm_hal" consists of the calls for processing resource and power management.
  - "sciserver" receives the TI_SCI messages from other cores and processes it.
  - "sciclient_direct" calls the rm_pm_hal or sends the messages to TIFS based on the TI_SCI request.
  - "self_reset" contains the entry point of the DM firmware application. It resets the DM R5 and enables the TCMA.
  - "dm_stub" enables low power mode features.

As the DM firmware requires multiple threads, it requires an RTOS. So any application on DM R5 should start the SCI server on a thread and actual application can be run on a different thread. Refer main.c of any r5fss0-0 example application to see how to implement this.

\attention
- As the wake-up R5 is the device manager, it needs to be started by the SBL. So it can not be loaded through CCS.
It should be flashed and booted through SBL.
- DM firmware needs to be multi-threading/rtos application as it creates multiple threads during initialization.

### Build and load DMR5 examples

- Refer \ref GETTING_STARTED_BUILD for building the application in debug mode, either by using CCS IDE or make utility.
- After the application is build, use \ref GETTING_STARTED_FLASH steps to flash and boot using SBL.

### Debugging an application on DMR5 core

- Once the DM R5 is booted through SBL, symbols can be loaded through CCS for loading.
Follow the below steps to debug any application developed for DM R5.

1. Insert an infinite loop before the start of the test application.
    \imageStyle{infinite_loop.png,width:28%}
    \image html infinite_loop.png "Insert infinite loop"

2. Connect to DMR5 core for debugging.
    \imageStyle{ccs_connect.png,width:50%}
    \image html ccs_connect.png "Connect to DMR5 Core"

3. Load the symbols for the test application.
    \imageStyle{ccs_load_symbols.png,width:60%}
    \image html ccs_load_symbols.png "Load Symbols for debug"

4. Navigate to the ".out" file generated by the test application.
    \imageStyle{ccs_navigate.png,width:30%}
    \image html ccs_navigate.png "Navigate to the ELF"

5. In the CCS Debug Perspective's **Expressions** window, enter the *loop* variable and update its value to *0*.
    \imageStyle{ccs_remove_infinite_loop.png,width:80%}
    \image html ccs_remove_infinite_loop.png "Update expression value"

6. Continue with the debugging process asusual.


